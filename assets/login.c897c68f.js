import C from"./ContainerLayout.babcba3f.js";import{_ as I,U as P}from"./index.f94ec331.js";import{T as R}from"./Translations.6d07259b.js";import{I as w,o as h,k as S,m as l,u as T,g as U,h as A,M as v,O as z,X as E,i as O,a5 as q,W as D,r as u,t as V,v as s,H as $,l as y,G as B,L as G,d as L,T as H,U as M}from"./vendor.d9092c22.js";import"./lodash.1d85782b.js";var f=w({name:"Promotion"});const W={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},X=l("path",{fill:"currentColor",d:"m64 448 832-320-128 704-446.08-243.328L832 192 242.816 545.472 64 448zm256 512V657.024L512 768 320 960z"},null,-1);f.render=function(a,m,d,g,t,o){return h(),S("svg",W,[X])},f.__file="packages/components/Promotion.vue";const F=w({name:"UserAccountLogin",components:{UserAccountContainerLayout:C,Promotion:f,Translations:R},setup(){const{proxy:a}=G(),m=T(),d=U(),g=A(),t=v(!0),o=v(""),n=v(""),c=z({email:"vite.admin@gmail.com",password:"123456"}),e=E(),p=O(()=>({title:e.t("login.hydl"),actionList:[{attrs:{type:"primary",loading:t.value,size:"large"},text:e.t("login.signin"),on:{click(i){a.onSubmit(i)}}}],formConfig:[{attrs:{prop:"email",error:o.value,rules:()=>[a.getRequiredRules({trigger:"change",message:e.t("login.plsemail")}),a.getValidatorRules("","blur",{type:"email",message:e.t("login.plscurrentemail")})]},label:e.t("login.email"),prefixIcon:"user-tie",placeholder:e.t("login.plsemail")},{attrs:{prop:"password",error:n.value,rules:()=>a.getRequiredRules({trigger:"change",message:e.t("login.plspwd")})},link:{text:e.t("login.fgtpwd"),click(){}},type:"password",label:e.t("login.pwd"),prefixIcon:"lock",placeholder:e.t("login.plspwd")}]}));function r(i=!1){t.value=i}return r(!0),q(()=>{D(()=>{r(!1)})}),{isLoading:t,inputErrorEmail:o,inputErrorPassword:n,formData:c,configLogin:p,setLoading:r,onSubmit:function(i){t.value||i.validate(async k=>{if(!k)return;o.value="",n.value="",r(!0);const{error:_,data:b,msg:j}=await m.dispatch(P.getAction("login"),c);if(_)return o.value=" ",n.value=j,void r(!1);L.set("token",b.user.token),L.set("name",b.user.username),g.replace(`/${d.params.locale||""}`).then(()=>{a.$message({type:"success",message:"\u767B\u5F55\u6210\u529F"})}).catch(()=>{})})}}}}),x=a=>(H("data-v-2c7779b6"),a=a(),M(),a),J={class:"user-account-login"},K={class:"user-account-nav"},N={class:"nav-left"},Q=x(()=>s("div",{class:"nav-logo"},null,-1)),Y=x(()=>s("div",{class:"nav-circle"},null,-1)),Z={class:"nav-title"},aa={class:"nav-right"},ea={class:"user-account-body"};var ia=I(F,[["render",function(a,m,d,g,t,o){const n=u("Translations"),c=u("Promotion"),e=u("el-icon"),p=u("UserAccountContainerLayout");return h(),V("div",J,[s("div",K,[s("div",N,[Q,Y,s("div",Z,$(a._t("base.systemTitle")),1)]),s("div",aa,[l(n)])]),s("div",ea,[l(p,B(a.configLogin,{"form-data":a.formData,onOnSubmit:a.onSubmit}),{titleIcon:y(()=>[l(e,null,{default:y(()=>[l(c)]),_:1})]),_:1},16,["form-data","onOnSubmit"])])])}],["__scopeId","data-v-2c7779b6"]]);export{ia as default};
