import x from"./ContainerLayout.e6c94134.js";import{_ as S,u as _,U as I}from"./index.56d4e75e.js";import{T as R}from"./Translations.66a0bc09.js";import{s as A,a8 as T,u as U,g as C,h as E,L as g,S as O,Y as P,i as q,a9 as D,X as $,r as l,o as j,t as z,v as t,I as F,m as c,l as b,H,d as y,M,O as V}from"./vendor.0f9e0ce5.js";import"./lodash.629f5dbe.js";const X=A({name:"UserAccountLogin",components:{UserAccountContainerLayout:x,Promotion:T,Translations:R},setup(){const{proxy:a}=_(),d=U(),p=C(),v=E(),i=g(!0),n=g(""),o=g(""),u=O({email:"vite.admin@gmail.com",password:"123456"}),e=P(),m=q(()=>({title:e.t("login.hydl"),actionList:[{attrs:{type:"primary",loading:i.value,size:"large"},text:e.t("login.signin"),on:{click(r){a.onSubmit(r)}}}],formConfig:[{attrs:{prop:"email",error:n.value,rules:()=>[a.getRequiredRules({trigger:"change",message:e.t("login.plsemail")}),a.getValidatorRules("","blur",{type:"email",message:e.t("login.plscurrentemail")})]},label:e.t("login.email"),prefixIcon:"user-tie",placeholder:e.t("login.plsemail")},{attrs:{prop:"password",error:o.value,rules:()=>a.getRequiredRules({trigger:"change",message:e.t("login.plspwd")})},link:{text:e.t("login.fgtpwd"),click(){}},type:"password",label:e.t("login.pwd"),prefixIcon:"lock",placeholder:e.t("login.plspwd")}]}));function s(r=!1){i.value=r}return s(!0),D(()=>{$(()=>{s(!1)})}),{isLoading:i,inputErrorEmail:n,inputErrorPassword:o,formData:u,configLogin:m,setLoading:s,onSubmit:function(r){i.value||r.validate(async w=>{if(!w)return;n.value="",o.value="",s(!0);const{error:L,data:f,msg:k}=await d.dispatch(I.getAction("login"),u);if(L)return n.value=" ",o.value=k,void s(!1);y.set("token",f.user.token),y.set("name",f.user.username),v.replace(`/${p.params.locale||""}`).then(()=>{a.$message({type:"success",message:"\u767B\u5F55\u6210\u529F"})}).catch(()=>{})})}}}}),h=a=>(M("data-v-8d92b7f0"),a=a(),V(),a),Y={class:"user-account-login"},B={class:"user-account-nav"},G={class:"nav-left"},J=h(()=>t("div",{class:"nav-logo"},null,-1)),K=h(()=>t("div",{class:"nav-circle"},null,-1)),N={class:"nav-title"},Q={class:"nav-right"},W={class:"user-account-body"};var oa=S(X,[["render",function(a,d,p,v,i,n){const o=l("Translations"),u=l("Promotion"),e=l("el-icon"),m=l("UserAccountContainerLayout"),s=l("Footer");return j(),z("div",Y,[t("div",B,[t("div",G,[J,K,t("div",N,F(a._t("base.systemTitle")),1)]),t("div",Q,[c(o,{dark:""})])]),t("div",W,[c(m,H(a.configLogin,{"form-data":a.formData,onOnSubmit:a.onSubmit}),{titleIcon:b(()=>[c(e,null,{default:b(()=>[c(u)]),_:1})]),_:1},16,["form-data","onOnSubmit"])]),c(s)])}],["__scopeId","data-v-8d92b7f0"]]);export{oa as default};
