import{Y as I,Q as L,R as x,P as v}from"./index-184fec69.js";import C from"./ContainerLayout-9185f8ee.js";import{U as R}from"./index-3861e3e8.js";import{T as A}from"./Translations-32239e96.js";import{u as P}from"./vuex.esm-bundler-9ae4faea.js";import{u as T}from"./useCurrentInstance-f2e76c1b.js";import{u as U}from"./index-3de23cb0.js";import{a3 as E}from"./index-71e296c5.js";import{x as M,r as m,V as $,e as V,o as B,S as D,ai as O,y as q,z,A as s,O as F,P as c,I as h,T as N,a7 as l,ak as j,al as Q}from"./_plugin-vue_export-helper-ab1918ac.js";import"./lodash-e9f1b42e.js";import"./_commonjsHelpers-725317a4.js";import"./type-e5290aea.js";import"./mixin-4a2c716f.js";import"./useBaseStore-39749ee0.js";import"./index-fea87034.js";const Y=M({name:"UserAccountLogin",components:{UserAccountContainerLayout:C,Promotion:I,Translations:A},setup(){const{proxy:o}=T(),d=P(),g=L(),_=x(),a=m(!0),r=m(""),n=m(""),u=$({email:"vite.admin@gmail.com",password:"123456"}),e=U(),p=V(()=>({title:e.t("login.hydl"),actionList:[{attrs:{type:"primary",loading:a.value,size:"large"},text:e.t("login.signin"),on:{click(i){o.onSubmit(i)}}}],formConfig:[{attrs:{prop:"email",error:r.value,rules(){return[o.getRequiredRules({trigger:"change",message:e.t("login.plsemail")}),o.getValidatorRules("","blur",{type:"email",message:e.t("login.plscurrentemail")})]}},label:e.t("login.email"),prefixIcon:"user-tie",placeholder:e.t("login.plsemail")},{attrs:{prop:"password",error:n.value,rules(){return o.getRequiredRules({trigger:"change",message:e.t("login.plspwd")})}},link:{text:e.t("login.fgtpwd"),click(){}},type:"password",label:e.t("login.pwd"),prefixIcon:"lock",placeholder:e.t("login.plspwd")}]}));function t(i=!1){a.value=i}function k(i){a.value||i.validate(async w=>{if(!w)return;r.value="",n.value="",t(!0);const{error:S,data:f,msg:b}=await d.dispatch(R.getAction("login"),u);if(S){r.value=" ",n.value=b,t(!1);return}v.set("token",f.user.token),v.set("name",f.user.username),_.replace(`/${g.params.locale||""}`).then(()=>{E.success({message:"登录成功"})}).catch(()=>{})})}return t(!0),B(()=>{D(()=>{t(!1)})}),{isLoading:a,inputErrorEmail:r,inputErrorPassword:n,formData:u,configLogin:p,setLoading:t,onSubmit:k}}});const y=o=>(j("data-v-38894e88"),o=o(),Q(),o),G={class:"user-account-login"},H={class:"user-account-nav"},J={class:"nav-left"},K=y(()=>s("div",{class:"nav-logo"},null,-1)),W=y(()=>s("div",{class:"nav-circle"},null,-1)),X={class:"nav-title"},Z={class:"nav-right"},oo={class:"user-account-body"};function eo(o,d,g,_,a,r){const n=l("Translations"),u=l("Promotion"),e=l("el-icon"),p=l("UserAccountContainerLayout"),t=l("MyFooter");return q(),z("div",G,[s("div",H,[s("div",J,[K,W,s("div",X,F(o._t("base.systemTitle")),1)]),s("div",Z,[c(n,{dark:""})])]),s("div",oo,[c(p,N(o.configLogin,{"form-data":o.formData,onOnSubmit:o.onSubmit}),{titleIcon:h(()=>[c(e,null,{default:h(()=>[c(u)]),_:1})]),_:1},16,["form-data","onOnSubmit"])]),c(t)])}const ho=O(Y,[["render",eo],["__scopeId","data-v-38894e88"]]);export{ho as default};
